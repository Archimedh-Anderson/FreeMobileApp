name: Deploy to Streamlit Cloud

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Validate Streamlit app
        run: |
          pip install streamlit
          python -m streamlit.cli run streamlit_app/app.py --server.headless true &
          sleep 10
          curl -f http://localhost:8501 || exit 1
      
      - name: Notify deployment
        run: echo "âœ… App ready for Streamlit Cloud"
